USE programEEIT

DROP TABLE [advertise];
DROP TABLE [maps];
DROP TABLE [comments];
DROP TABLE [accounts];
DROP TABLE [aRecords];
DROP TABLE [orders];
DROP TABLE [favorities];
DROP TABLE [orderDetails];
DROP TABLE [menus];
DROP TABLE [kinds];
DROP TABLE [status];
DROP TABLE [hours];
DROP TABLE [recomments];
DROP TABLE [stores];
DROP TABLE [members];
DROP TABLE [orders];
DROP TABLE [response];
DROP TABLE [manager]

------------------------------------------------------------------------------------------------------------------------------------

CREATE TABLE [members] (
mID			int IDENTITY(1,1) NOT NULL,
mUsername	varchar(100) NOT NULL,
mPassword	varchar(50)	NOT NULL,
mName		nvarchar(20) NOT NULL,
mAddress	nvarchar(50) NOT NULL,
mPhone		char(15) ,
mBirthday	date NOT NULL,
mIMG		varchar(1000) ,
constraint members_primary_key primary key (mID),
);
insert into [members] (mName,mUsername,mPassword,mAddress,mBirthday) values ('翁強森','Johnsonweng@qq.com','Ww852258','台北市復興北路一段390號','1983/08/08');
insert into [members] (mName,mUsername,mPassword,mAddress,mBirthday) values ('藍教主','Bluesky@qq.com','Bb951159','台北市天母區德行東路一段250號','1990/05/05');
insert into [members] (mName,mUsername,mPassword,mAddress,mBirthday) values ('董Jay','Jjaydonn@qq.com','Jj753357','台北市忠孝西路一段100號','1987/10/10');
insert into [members] (mName,mUsername,mPassword,mAddress,mBirthday) values ('江江江','HankChiang@qq.com','Hh123321','台北市忠孝西路一段100號','1990/12/01');
insert into [members] (mName,mUsername,mPassword,mAddress,mBirthday) values ('莊家家','Roger@qq.com','Pp741147','台北市中和路507號5樓','1997/05/01');

CREATE TABLE [stores] (
sID			int IDENTITY(1,1) NOT NULL,
sUsername	varchar(20) NOT NULL,
sPassword	varchar(50) NOT NULL,
sName		nvarchar(50) NOT NULL,
sBossName	nvarchar(50) ,
sIntro		nvarchar(1000),
sLogo		varchar(1000),
constraint stores_primary_key primary key (sID),
);
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('口袋餅餐車','0933941767','Pocket767','經營PITA(口袋餅)、美式牛.雞肉捲及茶飲為主， 招牌主打的口袋餅，是代表中東平民美食的PITA為主角，嚴選在地新鮮自然食材','images/stores/car1.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('小惡魔披薩車','0981884559','Pizza559','熱~~~小惡魔麵皮現桿手工現做現烤！來片果樹材燒，起司香濃的義式窯烤披薩！','images/stores/car2.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('王將壽司','0932521571','Sushi571','[王將壽司]不管是花蓮人在地人或觀光客,宵夜第一首選~','images/stores/car3.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('北門蚵記仁夯蚵','0970563228','Oyster228','北門蚵記仁夯蚵，來自南方小漁村-台南北門區，一個科技人返鄉養蚵當蚵記仁，歡迎來南台灣夜市品嚐新鮮在地海味宅配業務:嚴選兩年大蚵當日現撈低溫宅配寄出','images/stores/car4.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('吐司怪獸','0968106076','Toast076','因為熱情，所以創造有別於一般的吐司，就像怪獸般衝擊你的味蕾口口都是驚喜','images/stores/car5.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('早鳥吐司','0955976845','Bird845','早鳥吐司 行動餐車 帶給您在都市忙碌的生活中 ,不可欠缺的精神糧食~~~!!!','images/stores/car6.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('伯爵快餐車','0905618883 ','Count883','五星主廚快餐車。不定點出沒囉!!!巴三明治。熱壓爆漿吐司。大口咬下，肉感十足幸福感激升，絕對過癮，歡迎公司行號,包場等各式活動邀約唷!!!','images/stores/car7.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('貓與詩人','0919133228','Cat228','貓與詩人創業的初衷並不是商業化，而是分享.透過料理，參與別人的生命，是一件很棒的事情。','images/stores/car8.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('Everywhere','0921967216','where216','來自台北街頭的手作美式料理餐車！ Everywhere Food Truck 手作食物車，目前提供八種口味手作漢堡，以及一種特調飲品，菜單也會不定時的更新增加。','images/stores/car9.jpg');
insert into [stores] (sName,sUsername,sPassword,sIntro,sLogo) values ('Cafe','0960000133','Feca133','每一天，從一杯美好咖啡開始。感受當下的美好時光，喝一口美好。','images/stores/car10.jpg');

CREATE TABLE [kinds] (
kindID			int IDENTITY(10,10) NOT NULL,
kindName		nvarchar(20) NOT NULL,
kindMemo		nvarchar(50) ,
constraint kinds_primary_key primary key (kindID),
);
insert into [kinds] (kindName,kindMemo) values ('單點','');
insert into [kinds] (kindName,kindMemo) values ('套餐','');

CREATE TABLE [status] (
statusID		int IDENTITY(1,1) NOT NULL,
statusName		nvarchar(20) NOT NULL,
statusMemo		nvarchar(50) ,
constraint status_primary_key primary key (statusID),
);
insert into [status] (statusName,statusMemo) values ('正常','');
insert into [status] (statusName,statusMemo) values	('缺貨','');
insert into [status] (statusName,statusMemo) values ('補貨中','');

CREATE TABLE [menus] (
foodID		int IDENTITY(1,1) NOT NULL,
foodName	nvarchar(50) NOT NULL,
sID			int NOT NULL,
kindID		int NOT NULL,
statusID	int NOT NULL,
unitPrice	decimal(18,0) NOT NULL,
foodIMG		varchar(1000) ,
constraint menus_statusID_fk foreign key (statusID) references status (statusID),
constraint menus_kindID_fk foreign key (kindID) references kinds (kindID),
constraint menus_sID_fk foreign key (sID) references stores (sID),
constraint menus_primary_key primary key (foodID,sID),
);
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('地瓜球','1','10','1','40','images/Menu/CGtJAd0UgAAdxXr.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('紅茶','1','10','1','20','images/Menu/16292228811_d9b61e1031_c.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('雞排','2','10','1','50','images/Menu/gp.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('珍珠奶茶','2','10','1','35','images/Menu/b285663a-af3b-427c-b493-2b01cda57257.png');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('雞排、珍珠奶茶','2','20','1','70','images/Menu/gp.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('鮮蝦蒸餃','3','10','2','8','images/Menu/R0051224.JPG');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('玉米濃湯','3','10','1','20','images/Menu/mobile01-87feff287face72dfdaff87419b09352.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('韭菜水餃','3','10','1','5','images/Menu/b8fb46_d90fc8ec1f6048eab22ff1ae56412854.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('韭菜水餃','3','10','1','5','images/Menu/b8fb46_d90fc8ec1f6048eab22ff1ae56412854.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('韭菜水餃','3','10','1','5','images/Menu/b8fb46_d90fc8ec1f6048eab22ff1ae56412854.jpg');
insert into [menus] (foodName,sID,kindID,statusID,unitPrice,foodIMG) values ('韭菜水餃','3','10','1','5','images/Menu/b8fb46_d90fc8ec1f6048eab22ff1ae56412854.jpg');

CREATE TABLE [orders] (
oID			int IDENTITY(1000,1) NOT NULL,
sID			int NOT NULL,
mID			int NOT NULL,
sName		    nvarchar(50) NOT NULL,
mName		    nvarchar(50) NOT NULL,
amount      int NOT NULL,
saleDate	datetime NOT NULL,
checkOut	int NOT NULL,
constraint orders_mID_fk foreign key (mID) references members (mID),
constraint orders_sID_fk foreign key (sID) references stores (sID),
constraint orders_primary_key primary key(oID),
);

CREATE TABLE [orderDetails] (
odID			int IDENTITY(1,1) NOT NULL,
oID				int NOT NULL,
sID				int NOT NULL,
foodID			int NOT NULL,
foodQuantity	int NOT NULL,
foodName        nvarchar(50) NOT NULL,
unitPrice	    decimal(18,0) NOT NULL,
totalPrice		decimal(18,0) NOT NULL,
mID				int NOT NULL,
odMemo			nvarchar(50) ,
constraint orderDetails_mID_fk foreign key (mID) references members (mID),
constraint orderDetails_sID_fk foreign key (sID) references stores (sID),
constraint orderDetails_oID_fk foreign key (oID) references orders (oID),
constraint orderDetails_primary_key primary key (odID),
);


CREATE TABLE [advertise] (
adID			int IDENTITY(1,1) NOT NULL,
sID				int NOT NULL,
sName			nvarchar(50) NOT NULL,
adIMG			varchar(1000) ,
constraint advertise_sID_fk foreign key (sID) references stores (sID),
constraint advertise_primary_key primary key (adID),
);

CREATE TABLE [maps] (
mapID			int IDENTITY(1,1) NOT NULL,
sID				int NOT NULL,
location		varchar(MAX) NOT NULL,
constraint maps_sID_fk foreign key (sID) references stores (sID),
constraint maps_primary_key primary key (mapID),
);
insert into [maps] (sID,location) values ('1','25.033681,121.564726');
insert into [maps] (sID,location) values ('2','25.047908,121.517315');
insert into [maps] (sID,location) values ('3','25.031953,121.543007');

CREATE TABLE [favorities] (
fID				int IDENTITY(1,1) NOT NULL,
mID				int NOT NULL,
sID				int NOT NULL,
sName			nvarchar(50) NOT NULL,
constraint favorities_sID_fk foreign key (sID) references stores (sID),
constraint favorities_mID_fk foreign key (mID) references members (mID),
constraint favorities_primary_key primary key (fID),
);

CREATE TABLE [comments] (
cID				int IDENTITY(1,1) NOT NULL,
mID				int NOT NULL,
sID				int NOT NULL,
cDate			datetime NOT NULL,
cContent		nvarchar(100) ,
cPoint			varchar(20) NOT NULL,
cIP				varchar(15) NOT NULL,
constraint comments_mID_fk foreign key (mID) references members (mID),
constraint comments_primary_key primary key (cID),
);

CREATE TABLE [accounts] (
aID			int IDENTITY(1,1) NOT NULL,
mID			int NOT NULL,
balance		decimal(18,0) NOT NULL,
constraint accounts_mID foreign key (mID) references members (mID),
constraint accounts_primary_key primary key (aID),
);
insert into [accounts] (mID,balance) values ('1','0');
insert into [accounts] (mID,balance) values ('2','0');
insert into [accounts] (mID,balance) values ('3','0');
insert into [accounts] (mID,balance) values ('4','0');
insert into [accounts] (mID,balance) values ('5','0');

CREATE TABLE [aRecords] (
arID		int IDENTITY(1,1) NOT NULL,
mID			int NOT NULL,
arDate		datetime NOT NULL,
arAmount	decimal(18,0) NOT NULL,
oID			int ,
constraint arecords_oID foreign key (oID) references orders (oID),
constraint arecords_mID foreign key (mID) references members (mID),
constraint arecords_primary_key primary key (arID,mID),	
);

CREATE TABLE [response] (
rID		int IDENTITY(1,1) NOT NULL,
cID		 int  NOT NULL,
sName		nvarchar(50),
mName		nvarchar(20),
cDate			datetime NOT NULL,
cContent		nvarchar(100) ,
cIP				varchar(15) NOT NULL,
constraint response_cID foreign key (cID) references comments (cID),
constraint response_primary_key primary key (rID),
);
insert into [status] (statusName,statusMemo) values ('正常','');
insert into [status] (statusName,statusMemo) values	('缺貨','');
insert into [status] (statusName,statusMemo) values ('補貨中','');




CREATE TABLE [hours] (
hrID		int IDENTITY(1,1) NOT NULL,
sID			int NOT NULL,
sun			varchar(15),
mon			varchar(15),
tue			varchar(15),
wed			varchar(15),
thu			varchar(15),
fri			varchar(15),
sat			varchar(15),
constraint hours_sID foreign key (sID) references stores (sID),
constraint hrID_primary_key primary key (hrID),
);
insert into [hours] (sID,sun,mon,tue,wed,thu,fri,sat) values ('1','0900~1200',null,'1200~1800','0900~1200','1000~1800','1200~1800','0900~1800');
insert into [hours] (sID,sun,mon,tue,wed,thu,fri,sat) values ('2','1800~2200','1200~1800','1400~2000','0900~1600','1800~2200',null,'0900~2200');
insert into [hours] (sID,sun,mon,tue,wed,thu,fri,sat) values ('3','0900~2300','0900~2300','0900~2300','0900~2300','0900~2300','0900~2300','0900~2300');

CREATE TABLE [manager] (
manageID	int IDENTITY(1,1) NOT NULL,
managerUser	varchar(100) NOT NULL,
managerPass	varchar(50) NOT NULL,
managerName nvarchar(10) ,
managerPhone varchar(15) ,
constraint manageID_primary_key primary key (manageID),
);


CREATE TABLE [recommend] (
rID		int IDENTITY(1,1) NOT NULL,
sID			int NOT NULL,
mID			int NOT NULL,
constraint recommend_sID foreign key (sID) references stores (sID),
constraint rID_primary_key primary key (rID),
);

-------------------------------------------------------------------------------------------------------------------------------------